---
title: "NBA Arbs"
execute:
  echo: false
  message: false
  warning: false
author: "James Brown"
date: "`r Sys.Date()`"
format:
  html:
    df-print: kable
    theme: cosmo
    self-contained: true
    toc: true
    toc-depth: 3
    fig-width: 8
    fig-height: 6
editor: visual
---

```{r}
# Libraries
library(tidyverse)

# Read in files
all_arbs <- read_rds("../Data/all_arbs.rds")
tab_miss_by_one <- read_rds("../Data/tab_points_miss_by_one.rds")
```

::: panel-tabset


## Other Arbs

```{r}
#| column: page

other_arbs <-
  all_arbs |>
  filter(margin > 0) |> 
  filter(!over_agency %in% c("Neds", "Unibet") & !under_agency %in% c("Neds", "Unibet")) |> 
  mutate(margin = round(margin, 2))

other_arbs
```

## Neds Arbs

```{r}
#| column: page

# Separate into Neds and Unibet and the rest
neds_arbs <-
  all_arbs |>
  filter(margin > 0) |> 
  filter(over_agency %in% c("Neds") | under_agency %in% c("Neds")) |> 
  filter(!over_agency %in% c("Unibet") | !under_agency %in% c("Unibet")) |> 
  mutate(margin = round(margin, 2))

neds_arbs
```

## Unibet Arbs

```{r}
#| column: page

unibet_arbs <-
  all_arbs |>
  filter(margin > 0) |> 
  filter(over_agency %in% c("Unibet") | under_agency %in% c("Unibet")) |> 
  filter(!over_agency %in% c("Neds") & !under_agency %in% c("Neds")) |> 
  mutate(margin = round(margin, 2)) |> 
  arrange(match, desc(margin))

unibet_arbs
```

## Tab Miss-by-1 Points Arbs

```{r}
#| column: page

tab_miss_by_1_points_arbs <-
  tab_miss_by_one |>
  filter(margin > 0) |> 
  filter(over_agency %in% c("TAB") | under_agency %in% c("TAB")) |> 
  filter(!over_agency %in% c("Neds", "Unibet") & !under_agency %in% c("Neds", "Unibet")) |> 
  mutate(margin = round(margin, 2))

tab_miss_by_1_points_arbs
```

:::
